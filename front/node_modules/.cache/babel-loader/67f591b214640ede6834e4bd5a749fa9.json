{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport React, { useCallback } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport NicknameEditForm from '../containers/NicknameEditForm';\nimport { LOAD_FOLLOWERS_REQUEST, LOAD_FOLLOWINGS_REQUEST, UNFOLLOW_USER_REQUEST, REMOVE_FOLLOWER_REQUEST } from '../reducers/user';\nimport { LOAD_USER_POST_REQUEST } from '../reducers/post';\nimport PostCard from '../containers/PostCard';\nimport FollowList from '../components/FollowList';\nimport { ProfileStyle } from './Style/PagesStyle';\n\nvar Profile = function Profile() {\n  var dispatch = useDispatch();\n\n  var _useSelector = useSelector(function (state) {\n    return state.user;\n  }),\n      followingList = _useSelector.followingList,\n      followerList = _useSelector.followerList,\n      hasMoreFollower = _useSelector.hasMoreFollower,\n      hasMoreFollowing = _useSelector.hasMoreFollowing;\n\n  var _useSelector2 = useSelector(function (state) {\n    return state.post;\n  }),\n      mainPosts = _useSelector2.mainPosts,\n      hasMorePost = _useSelector2.hasMorePost;\n\n  var onUnfollow = useCallback(function (userId) {\n    return function () {\n      dispatch({\n        type: UNFOLLOW_USER_REQUEST,\n        data: userId\n      });\n    };\n  }, []);\n  var onRemoveFollower = useCallback(function (userId) {\n    return function () {\n      dispatch({\n        type: REMOVE_FOLLOWER_REQUEST,\n        data: userId\n      });\n    };\n  }, []);\n  var loadMoreFollowings = useCallback(function () {\n    dispatch({\n      type: LOAD_FOLLOWINGS_REQUEST,\n      offset: followingList.length\n    });\n  }, [followingList.length]);\n  var loadMoreFollowers = useCallback(function () {\n    dispatch({\n      type: LOAD_FOLLOWERS_REQUEST,\n      offset: followerList.length\n    });\n  }, [followerList.length]);\n  return (/*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ProfileStyle, null, /*#__PURE__*/React.createElement(NicknameEditForm, null), /*#__PURE__*/React.createElement(FollowList, {\n      header: \"Follower List\",\n      hasMore: hasMoreFollower,\n      onClickMore: loadMoreFollowers,\n      data: followerList,\n      onClickStop: onRemoveFollower\n    }), /*#__PURE__*/React.createElement(FollowList, {\n      header: \"Following List\",\n      hasMore: hasMoreFollowing,\n      onClickMore: loadMoreFollowings,\n      data: followingList,\n      onClickStop: onUnfollow\n    }), /*#__PURE__*/React.createElement(\"div\", null, mainPosts.map(function (c) {\n      return (/*#__PURE__*/React.createElement(PostCard, {\n          key: +c.createdAt,\n          post: c\n        })\n      );\n    }))))\n  );\n};\n\nProfile.getInitialProps = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(context) {\n    var state;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            state = context.store.getState(); // 이 직전에 LOAD_USERS_REQUEST가 _app.js에서 실행된 후 뒤가 실행됨 그래서 load user request가 실행이 끝나야 state.user.me가 생김\n\n            context.store.dispatch({\n              type: LOAD_FOLLOWERS_REQUEST,\n              data: state.user.me && state.user.me.id\n            });\n            context.store.dispatch({\n              type: LOAD_FOLLOWINGS_REQUEST,\n              data: state.user.me && state.user.me.id\n            });\n            context.store.dispatch({\n              type: LOAD_USER_POST_REQUEST,\n              data: state.user.me && state.user.me.id\n            }); // 이 쯤에서 LOAD USER USCCESS가 되어 me가 생김! 순서의 문제이다 saga에서 주소가 0일 때 내 정보를 불러오게 처리함!\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nexport default Profile;","map":{"version":3,"sources":["C:/project/nodebird/front/pages/profile.js"],"names":["React","useCallback","useDispatch","useSelector","NicknameEditForm","LOAD_FOLLOWERS_REQUEST","LOAD_FOLLOWINGS_REQUEST","UNFOLLOW_USER_REQUEST","REMOVE_FOLLOWER_REQUEST","LOAD_USER_POST_REQUEST","PostCard","FollowList","ProfileStyle","Profile","dispatch","state","user","followingList","followerList","hasMoreFollower","hasMoreFollowing","post","mainPosts","hasMorePost","onUnfollow","userId","type","data","onRemoveFollower","loadMoreFollowings","offset","length","loadMoreFollowers","map","c","createdAt","getInitialProps","context","store","getState","me","id"],"mappings":"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","sourcesContent":["import React, { useCallback } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport NicknameEditForm from '../containers/NicknameEditForm';\r\nimport { LOAD_FOLLOWERS_REQUEST, LOAD_FOLLOWINGS_REQUEST, UNFOLLOW_USER_REQUEST, REMOVE_FOLLOWER_REQUEST } from '../reducers/user';\r\nimport { LOAD_USER_POST_REQUEST } from '../reducers/post';\r\nimport PostCard from '../containers/PostCard';\r\nimport FollowList from '../components/FollowList';\r\nimport { ProfileStyle } from './Style/PagesStyle';\r\n\r\nconst Profile = () => {\r\n    const dispatch = useDispatch();\r\n    const { followingList, followerList, hasMoreFollower, hasMoreFollowing } = useSelector(state => state.user);\r\n    const { mainPosts, hasMorePost } = useSelector(state => state.post);\r\n\r\n    const onUnfollow = useCallback(userId => () => {\r\n        dispatch({\r\n            type : UNFOLLOW_USER_REQUEST,\r\n            data : userId,\r\n        });\r\n    }, []);\r\n\r\n    const onRemoveFollower = useCallback(userId => () => {\r\n        dispatch({\r\n            type : REMOVE_FOLLOWER_REQUEST,\r\n            data : userId,\r\n        });\r\n    }, []);\r\n\r\n    const loadMoreFollowings = useCallback(() => {\r\n        dispatch({\r\n            type : LOAD_FOLLOWINGS_REQUEST,\r\n            offset : followingList.length,\r\n        })\r\n    }, [followingList.length]);\r\n\r\n    const loadMoreFollowers = useCallback(() => {\r\n        dispatch({\r\n            type : LOAD_FOLLOWERS_REQUEST,\r\n            offset : followerList.length,\r\n        })\r\n    }, [followerList.length]);\r\n\r\n    return(\r\n        <>\r\n            <ProfileStyle>\r\n                <NicknameEditForm/>\r\n                <FollowList\r\n                    header = \"Follower List\"\r\n                    hasMore = {hasMoreFollower}\r\n                    onClickMore={loadMoreFollowers}\r\n                    data = {followerList}\r\n                    onClickStop={onRemoveFollower}\r\n                />\r\n                <FollowList\r\n                    header = \"Following List\"\r\n                    hasMore = {hasMoreFollowing}\r\n                    onClickMore={loadMoreFollowings}\r\n                    data = {followingList}\r\n                    onClickStop={onUnfollow}\r\n                />\r\n                <div>\r\n                    {mainPosts.map(c => (\r\n                        <PostCard key={+c.createdAt} post={c} />\r\n                    ))}\r\n                </div>\r\n            </ProfileStyle>\r\n        </>\r\n    );\r\n};\r\n\r\nProfile.getInitialProps = async (context) => {\r\n    const state = context.store.getState();\r\n    // 이 직전에 LOAD_USERS_REQUEST가 _app.js에서 실행된 후 뒤가 실행됨 그래서 load user request가 실행이 끝나야 state.user.me가 생김\r\n    context.store.dispatch({\r\n        type : LOAD_FOLLOWERS_REQUEST,\r\n        data : state.user.me && state.user.me.id,\r\n    });\r\n    context.store.dispatch({\r\n        type : LOAD_FOLLOWINGS_REQUEST,\r\n        data : state.user.me && state.user.me.id,\r\n    });\r\n    context.store.dispatch({\r\n        type : LOAD_USER_POST_REQUEST,\r\n        data : state.user.me && state.user.me.id,\r\n    });\r\n    // 이 쯤에서 LOAD USER USCCESS가 되어 me가 생김! 순서의 문제이다 saga에서 주소가 0일 때 내 정보를 불러오게 처리함!\r\n}\r\n\r\nexport default Profile;"]},"metadata":{},"sourceType":"module"}